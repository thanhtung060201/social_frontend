<div style="margin-top: 10rem;" class="container">
  <div class="row">
    <nav class="menu">
      <ul class="items">
        <!-- <li class="item">
          <i class="fa fa-home" aria-hidden="true"></i>
        </li>
        <li class="item">
          <i class="fa fa-user" aria-hidden="true"></i>
        </li>
        <li class="item">
          <i class="fa fa-pencil" aria-hidden="true"></i>
        </li> -->
        <li class="item item-active">
          <i class="fa fa-commenting" aria-hidden="true"></i>
        </li>
        <!-- <li class="item">
          <i class="fa fa-file" aria-hidden="true"></i>
        </li>
        <li class="item">
          <i class="fa fa-cog" aria-hidden="true"></i>
        </li> -->
      </ul>
    </nav>

    <section class="discussions">
      <div class="discussion search">
        <div class="searchbar">
          <i class="fa fa-search" aria-hidden="true"></i>
          <input type="text" placeholder="Tìm kiếm...">
        </div>
      </div>
      <ng-container *ngFor="let friend of listFriends; let idx = index">
        <div [ngClass]="idx == selectedConversationIndex ? 'message-active' : ''" class="discussion" (click)="openConversation(friend.id, idx)">
          <div class="photo" style="background-image: url('assets/images/{{friend.imagePath ? friend.imagePath : defaultProfilePhoto}}');">
            <div class="online"></div>
          </div>
          <div class="desc-contact">
            <p class="name">{{ friend.lastName }} {{ friend.firstName }}</p>
            <p class="message">...</p>
          </div>
          <!-- <div class="timer">12 sec</div> -->
        </div>
      </ng-container>
    </section>
    <ng-container *ngIf="currentFriend">
      <section class="chat">
        <div class="header-chat">
          <div class="user-chat-active" style="background-image: url('assets/images/{{currentFriend.imagePath ? currentFriend.imagePath : defaultProfilePhoto}}');">
            <div class="online"></div>
          </div>
          <p class="name">{{currentFriend.lastName}} {{ currentFriend.firstName }}</p>
          <i class="icon clickable fa fa-ellipsis-h right" aria-hidden="true"></i>
        </div>
        <div #areaChat class="messages-chat">
          <ng-container *ngFor="let message of messages">
            <ng-container *ngIf="currentUserId == message?.user?.id;else friendMessage">
              <div style="display: flex; flex-direction: row-reverse;" class="message">
                <div class="photo" style="background-image: url('assets/images/{{currentUser?.imagePath ? currentUser?.imagePath : defaultProfilePhoto}}')">
                  <div class="online"></div>
                </div>
                <p class="text"> {{message?.message}} </p>
              </div>
              <p class="time" style="display: flex; justify-content: end;"> {{message?.createdAt | date:'medium'}}</p>
            </ng-container>
            <ng-template #friendMessage>
              <div class="message">
                <div class="photo" style="background-image: url('assets/images/{{currentFriend?.imagePath ? currentFriend?.imagePath : defaultProfilePhoto}}')">
                  <div class="online"></div>
                </div>
                <p class="text"> {{message?.message}} </p>
              </div>
              <p class="time" style="display: flex; justify-content: start;"> {{message?.createdAt | date:'medium'}}</p>
            </ng-template>
          </ng-container>
        </div>
        <div class="footer-chat">
          <i class="icon fa fa-smile-o clickable" style="font-size:25pt;" aria-hidden="true"></i>
          <input (keyup.enter)="sendMessage()" [formControl]="inputControl" type="text" style="outline: none;" class="write-message" placeholder="Nhập tin nhắn...">
          <i (click)="sendMessage()" class="icon send fa fa-paper-plane-o clickable" aria-hidden="true"></i>
        </div>
      </section>
    </ng-container>
  </div>
</div>
