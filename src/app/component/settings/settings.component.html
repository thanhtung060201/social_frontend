<div class="container">
	<div class="row justify-content-center">
		<div class="col-6" style="margin-top: 110px;">
			<div class="bg-white mat-elevation-z3 rounded mb-5">
				<mat-tab-group mat-stretch-tabs dynamicHeight>
					<mat-tab label="Cập nhật thông tin">
						<div class="p-5">
							<form [formGroup]="updateInfoFormGroup" (ngSubmit)="handleUpdateInfo()">
								<mat-form-field class="w-100 pb-2" appearance="outline">
									<mat-label>Hãy nói vài điều gì đó về bạn</mat-label>
									<textarea matInput formControlName="description" placeholder="Hãy nói vài điều gì đó về bạn" cdkTextareaAutosize
										cdkAutosizeMinRows="2" cdkAutosizeMaxRows="5">
									</textarea>
									<mat-error *ngIf="updateInfoFormGroup.controls['description'].hasError('maxlength') || updateInfoFormGroup.controls['description'].hasError('serverError')">
										Không thể vượt quá 100 ký tự
									</mat-error>
								</mat-form-field>

								<mat-form-field class="w-100 pb-2" appearance="outline">
									<mat-label>Tên</mat-label>
									<input type="text" matInput formControlName="firstName" placeholder="Ex. John">
									<mat-error *ngIf="updateInfoFormGroup.controls['firstName'].hasError('required') || updateInfoFormGroup.controls['firstName'].hasError('maxlength') || updateInfoFormGroup.controls['firstName'].hasError('serverError')">
										Trường này là bắt buộc và không thể vượt quá 64 ký tự
									</mat-error>
								</mat-form-field>

								<mat-form-field class="w-100 pb-2" appearance="outline">
									<mat-label>Họ</mat-label>
									<input type="text" matInput formControlName="lastName" placeholder="Ex. Doe">
									<mat-error *ngIf="updateInfoFormGroup.controls['lastName'].hasError('required') || updateInfoFormGroup.controls['lastName'].hasError('maxlength') || updateInfoFormGroup.controls['lastName'].hasError('serverError')">
										Trường này là bắt buộc và không thể vượt quá 64 ký tự
									</mat-error>
								</mat-form-field>

								<mat-form-field class="w-100 pb-2" appearance="outline">
									<mat-label>Địa chỉ</mat-label>
									<input type="text" matInput formControlName="address" placeholder="Ex. Dhaka">
									<mat-error *ngIf="updateInfoFormGroup.controls['address'].hasError('maxlength') || updateInfoFormGroup.controls['address'].hasError('serverError')">
										Không thể vượt quá 128 ký tự
									</mat-error>
								</mat-form-field>

								<mat-form-field class="w-100 pb-2" appearance="outline">
									<mat-label>Học vấn</mat-label>
									<input type="text" matInput formControlName="education" placeholder="Ex. University of XYZ">
									<mat-error *ngIf="updateInfoFormGroup.controls['education'].hasError('maxlength') || updateInfoFormGroup.controls['education'].hasError('serverError')">
										Không thể vượt quá 128 ký tự
									</mat-error>
								</mat-form-field>

								<mat-form-field appearance="outline" class="d-block pb-2">
									<mat-label>Ngày sinh</mat-label>
									<input formControlName="dob" matInput [matDatepicker]="birthDatePicker">
									<mat-datepicker-toggle matSuffix [for]="birthDatePicker"></mat-datepicker-toggle>
									<mat-datepicker touchUi #birthDatePicker></mat-datepicker>
									<mat-error *ngIf="updateInfoFormGroup.controls['dob'].hasError('serverError')">
										Ngày sinh không hợp lệ
									</mat-error>
								</mat-form-field>

								<mat-radio-group formControlName="gender" class="d-block mb-2">
									<mat-radio-button value="Male" class="me-3">Nam</mat-radio-button>
									<mat-radio-button value="Female">Nữ</mat-radio-button>
									<mat-error *ngIf="updateInfoFormGroup.controls['gender'].hasError('serverError')">
										Giới tính không hợp lệ
									</mat-error>
								</mat-radio-group>

								<span class="d-block mb-4 pb-2"></span>

								<mat-card-actions>
									<button mat-raised-button color="primary" type="submit">Lưu</button>
								</mat-card-actions>
							</form>
						</div>

						<mat-progress-bar mode="indeterminate" *ngIf="submittingForm"></mat-progress-bar>
					</mat-tab>

					<mat-tab label="Đổi mật khẩu">
						<div class="p-5">
							<form [formGroup]="updatePasswordFormGroup" (ngSubmit)="handleUpdatePassword()">
                <mat-form-field class="w-100 pb-3" appearance="outline">
									<mat-label>Mật khẩu cũ</mat-label>
									<input type="password" matInput formControlName="oldPassword" placeholder="*************">
									<mat-error *ngIf="updatePasswordFormGroup.controls['oldPassword'].hasError('required')">
										Mật khẩu cũ là bắt buộc
									</mat-error>
									<mat-error *ngIf="updatePasswordFormGroup.controls['oldPassword'].hasError('minlength', 'maxlength')">
										Mật khẩu phải dài từ 6 đến 32 ký tự
									</mat-error>
									<mat-error *ngIf="updatePasswordFormGroup.controls['oldPassword'].hasError('serverError')">
										Mật khẩu phải là số và phải bao gồm chữ hoa, chữ thường và ký tự đặc biệt
									</mat-error>
								</mat-form-field>
								<mat-form-field class="w-100 pb-2" appearance="outline">
									<mat-label>Mật khẩu mới</mat-label>
									<input type="password" matInput formControlName="password" placeholder="*************">
									<mat-error *ngIf="updatePasswordFormGroup.controls['password'].hasError('required')">
										Mật khẩu là bắt buộc
									</mat-error>
									<mat-error *ngIf="updatePasswordFormGroup.controls['password'].hasError('minlength', 'maxlength')">
										Mật khẩu phải dài từ 6 đến 32 ký tự
									</mat-error>
									<mat-error *ngIf="updatePasswordFormGroup.controls['password'].hasError('serverError')">
										Mật khẩu phải là số và phải bao gồm chữ hoa, chữ thường và ký tự đặc biệt
									</mat-error>
								</mat-form-field>

								<mat-form-field class="w-100 pb-2" appearance="outline">
									<mat-label>Nhập lại mật khẩu</mat-label>
									<input type="password" matInput formControlName="passwordRepeat" placeholder="*************" [errorStateMatcher]="repeatPasswordMatcher">
									<mat-error *ngIf="updatePasswordFormGroup.controls['passwordRepeat'].hasError('required')">
										Nhập lại mật khẩu là bắt buộc
									</mat-error>
									<mat-error *ngIf="updatePasswordFormGroup.hasError('passwordMissMatch') || updatePasswordFormGroup.controls['passwordRepeat'].hasError('serverError')">
										Mật khẩu không khớp
									</mat-error>
								</mat-form-field>

								<mat-card-actions>
									<button mat-raised-button color="primary" type="submit">Thay đổi mật khẩu</button>
								</mat-card-actions>
							</form>
						</div>

						<mat-progress-bar mode="indeterminate" *ngIf="submittingForm"></mat-progress-bar>
					</mat-tab>
				</mat-tab-group>
			</div>
		</div>
	</div>
</div>
